---
processes:
  - name: cube_stager # same as BOSH-job name means `-p <process>` is not needed
    executable: /var/vcap/packages/cube/bin/cube
    args:
    - stage
    - --kubeconfig
    - "/var/vcap/jobs/cube_stager/config/kube.yml"
    - --cf-endpoint
    - <%= p('cube_stager.ccAPI') %>
    - --cf-username
    - <%= p('cube_stager.adminUser') %>
    - --cf-password
    - <%= p('cube_stager.adminPassword') %>
    - --cube-address
    - <%= p('cube_stager.cube_address') %>
    - --namespace
    - <%= p('cube_stager.kube_namespace') %>
    <% if p("cube_stager.skipSslValidation") %>- --skipSslValidation<% end %>
    limits:
      memory: 3G
      processes: 10
      open_files: 100000
    ephemeral_disk: true # mount /var/vcap/data/the_job ; default `false`
                         # NOTE: /var/vcap/data/the_job/tmp is always mounted `rw`
