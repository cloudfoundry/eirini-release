---
- type: replace
  path: /releases?/-
  value:
    name: cube
    version: latest

- type: replace
  path: /instance_groups?/-
  value:
    name: cube
    instances: 1
    stemcell: default
    update:
      serial: true
    vm_type: minimal
    azs:
    - z1
    networks:
    - name: default
    jobs:
    - name: cflinuxfs2-rootfs-setup
      release: cflinuxfs2
    - name: cube_registry
      release: cube
    - name: cube_stager
      release: cube
      properties:
        cube_stager:
          ccAPI: "((cc_api))"
          ccUser: "internal_user"
          ccPassword: "((cc_internal_api_password))"
          backend: k8s
          config: ((k8s_flatten_cluster_config))
          adminPassword: "((cf_admin_password))"
          cube_address: "((cube_address))"
          skipSslValidation: true
          kube_namespace: "((kube_namespace))"
    - name: cube_sync
      release: cube
      properties:
        cube_sync:
          ccAPI: "((cc_api))"
          ccUser: "internal_user"
          ccPassword: "((cc_internal_api_password))"
          backend: k8s
          config: ((k8s_flatten_cluster_config))
          adminPassword: "((cf_admin_password))"
          skipSslValidation: true
          kube_namespace: "((kube_namespace))"
          kube_endpoint: "((kube_endpoint))"
          registry_address: "((registry_address))"
    - name: cube_route_emitter
      release: cube
      properties:
        cube_route_emitter:
          kube_endpoint: "((kube_endpoint))"
          kube_namespace: "((kube_namespace))"
          nats_password: "((nats_password))"
          nats_ip: "((nats_ip))"
          config: ((k8s_flatten_cluster_config))


- type: replace
  path: /instance_groups/name=api/jobs/name=cloud_controller_ng/properties/cc/diego?/stager_url?
  value: http://cube.service.cf.internal:8085

- type: replace
  path: /instance_groups/name=api/jobs/name=cloud_controller_ng/properties/cc/diego?/temporary_local_staging?
  value: false

- type: replace
  path: /addons/name=bosh-dns/jobs/name=bosh-dns/properties/aliases/cube.service.cf.internal?/-
  value: "((cube_ip))"
